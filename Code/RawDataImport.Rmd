---
title: "RawDataImport"
author: "jhs"
date: "2025-12-02"
output: pdf_document
editor_options: 
  chunk_output_type: console
---

This raw data import relies on essential packages: tidyverse, here and readxl. We verify with `here()` that our working directory is accurate. We then import the data using the read_xlsx() function.

```{r setup, include=FALSE}
#install.packages(tidyverse);install.packages(here); install.packages(readxl)
library(tidyverse)
library(readxl)
library(here)
here()
RawNCData <- data.frame(read_xlsx(here('Data','Raw','NCDataPortal-RAW.xlsx'), skip = 2), stringsAsFactors = TRUE)
```

As always, we inspect the nature of the data. We use functions head(), str(), summary(), dim(), and colnames() to view and summarize the data.

```{r Exploring the Structure of the Raw Data}
head(RawNCData)
str(RawNCData)
summary(RawNCData)
dim(RawNCData)
colnames(RawNCData)
```

On first glance we see that there are many more columns representing household income in more detail than we need. Additionally, we see that all the income columns are stored as strings. We will clean this data so that just the income columns we want are in the dataframe and that those columns are numeric before moving on to other formatting.

```{r Formatting Incomes as Numeric}
NCData_Mutate <- RawNCData %>% 
  select("County" = "Indicator.Attribute",
         "Total.Family.Households",
         "Average.Family.Income",
         "Median.Family.Income",
         "TotalPop2018" = "Total.Population..2018.", #Abbreviating long name
         "Walkability.Index.Score",
         "Least.Walkable",
         "Below.Average.Walkable",
         "Above.Average.Walkable",
         "Most.Walkable",
         "Total.Population",
         "PopInFHA" = "Estimated.Population.Within.a.Flood.Hazard.Area", 
         "PercentPopInFHA" = "Percentage.of.Population.Within.a.100.year.Flood.Hazard.Area")

class(RawNCData$Average.Family.Income)
```
